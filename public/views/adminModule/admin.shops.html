<div>
<md-content class="md-padding">
<md-tabs md-dynamic-height md-border-bottom md-selected="selectedIndex">
<md-tab label="Shop List">
    <md-content class="md-padding">
        <div>
            <trendi-search actions="search"></trendi-search>
            <div style="padding-top: 150px;">
                <md-button class="md-raised md-primary" ng-click="EditViewController('')"><md-icon md-svg-src="add-circle"></md-icon> Add New Shop</md-button>
                <div style="padding-top: 20px;">
                    <md-list infinite-scroll='paginationFuntion()' infinite-scroll-distance='0.01'>
                        <md-list-item ng-repeat="shop in shopList" ng-click="EditViewController(shop)">
                            <img alt="{{ shop.name }}" ng-src="{{shop.iconImage}}" class="md-avatar" />
                            <p>{{ shop.name }}</p>
                            <!-- <md-svg-icon class="ic_24px" icon="{{person.iconimg}}"></md-svg-icon>-->
                            <md-icon md-svg-icon="communication:ic_settings" ng-click="EditViewController(shop)" aria-label="Open Chat" class="md-secondary md-hue-3" ng-class="{'md-primary': shop.name}"></md-icon>
                        </md-list-item>
                    </md-list>
                </div>
            </div>
        </div>
    </md-content>
</md-tab>
<md-tab label="{{headerText}}" ng-disabled="selectedIndex == 0">
    <md-content  layout-padding class="md-padding">
        <h5 class="md-display-2">{{headerText}}</h5>
        <form novalidate="" name="itemForm">
            <div>
                <div class="col-md-12">
                    <div class="raw">
                        <div class="col-md-6">
                            <h6>Shop Details</h6>
                            <md-input-container flex>
                                <!-- Use floating label instead of placeholder -->
                                <label>Shop Name</label>
                                <input ng-model="shop.name" name="shopName" type="text" ng-required="true">
                                <div ng-messages="itemForm.shopName.$error">
                                    <div ng-message="required">This is required.</div>
                                </div>

                            </md-input-container>

                            <md-input-container flex>
                                <label>Address</label>
                                <input ng-model="shop.address.line1">
                            </md-input-container>
                            <md-input-container flex>
                                <label>Address 2</label>
                                <input ng-model="shop.address.line2">
                            </md-input-container>
                            <div layout layout-sm="column">
                                <md-input-container flex>
                                    <label>City</label>
                                    <input ng-model="shop.address.city">
                                </md-input-container>
                                <md-input-container flex>
                                    <label>State</label>
                                    <input ng-model="shop.address.state">
                                </md-input-container>
                                <md-input-container flex>
                                    <label>Postal Code</label>
                                    <input ng-model="shop.address.postalCode">
                                </md-input-container>
                            </div>
                            <div layout layout-sm="column">
                                <md-input-container flex>
                                    <label>Hotline</label>
                                    <input ng-model="shop.hotline">
                                </md-input-container>
                                <md-input-container flex>
                                    <label>Mobile</label>
                                    <input ng-model="shop.mobile">
                                </md-input-container>
                            </div>
                            <md-input-container flex>
                                <label>Description</label>
                                <input md-maxlength="100" name="description" ng-model="shop.description">
                                <div ng-messages="itemForm.description.$error">
                                    <div ng-message="md-maxlength">The name has to be less than 100 characters long.</div>
                                </div>
                            </md-input-container>
                        </div>
                        <div class="col-md-6">
                            <h6>User Details</h6>
                            <md-input-container flex>
                                <!-- Use floating label instead of placeholder -->
                                <label>Name</label>
                                <input ng-model="regUser.name" name="name" type="text" ng-required="true">
                                <div ng-messages="itemForm.name.$error">
                                    <div ng-message="required">This is required.</div>
                                </div>

                            </md-input-container>

                            <md-input-container flex>
                                <!-- Use floating label instead of placeholder -->
                                <label>Email</label>
                                <input ng-disabled="!addNew" ng-model="regUser.email" name="email" type="email" ng-required="true">
                                <div ng-messages="itemForm.email.$error">
                                    <div ng-message="required">This is required.</div>
                                    <div ng-message="email">Invalid email address</div>
                                </div>

                            </md-input-container>

                            <md-input-container flex>
                                <!-- Use floating label instead of placeholder -->
                                <label>Password</label>
                                <input ng-disabled="!addNew" ng-model="regUser.password" name="password" type="password" ng-required="true">
                                <div ng-messages="itemForm.password.$error">
                                    <div ng-message="required">This is required.</div>
                                </div>

                            </md-input-container>

                            <md-input-container flex ng-if="addNew">
                                <!-- Use floating label instead of placeholder -->
                                <label>Confirm Password</label>
                                <input ng-model="regUser.confirm_password" name="confirm_password" type="password" ng-required="true" compare-to="regUser.password">
                                <div ng-messages="itemForm.confirm_password.$error">
                                    <div ng-message="required">This is required.</div>
                                    <div ng-message="compareTo">Password does not match the confirm password.</div>
                                </div>

                            </md-input-container>

                            <div layout layout-sm="column">
                                <md-input-container flex>
                                    <label>Telephone</label>
                                    <input ng-model="regUser.hotline">
                                </md-input-container>
                                <md-input-container flex>
                                    <label>Mobile</label>
                                    <input ng-model="regUser.mobile">
                                </md-input-container>
                            </div>



                        </div>
                    </div>
                    <div class="raw">
                        <div class="col-md-6">
                            <div ng-if="initDirective">
                                <trendi-map get-point="shop.pos"></trendi-map>
                            </div>
                        </div>
                        <div class="col-md-6">
                            <div ng-if="initDirective">
                                <trendi-file-upload files="tmp.profilePic" image-size="profilePicSize" image-count="1"></trendi-file-upload>
                            </div>
                        </div>
                    </div>

                    <div class="raw">
                        <accordion close-others="true">
                            <accordion-group heading="Banner and Icon upload">
                                <div class="raw">
                                    <div class="col-md-6">
                                        <div ng-if="initDirective">
                                            <trendi-file-upload files="tmp.iconImage" image-size="iconSize"  image-count="1"></trendi-file-upload>
                                        </div>
                                    </div>
                                    <div class="col-md-6">
                                        <div ng-if="initDirective">
                                            <trendi-file-upload files="tmp.bannerImage" image-size="bannerSize" image-count="1"></trendi-file-upload>
                                        </div>
                                    </div>
                                </div>
                            </accordion-group>
                            <accordion-group heading="Set Entitlements">
                                <div ng-if="initDirective && loadEntitlements">
                                    <trendi-entitlements input-entitlements="tmp.allEntitlements" output-entitlements="tmp.entitlements" old-entitlements="tmp.oldEntitlements"></trendi-entitlements>
                                </div>
                            </accordion-group>
                            <accordion-group heading="All Shop Users">
                                <div>

                                        <md-list>
                                            <md-list-item ng-repeat="user in userList" ng-click="ViewController(user)">
                                                <img alt="{{ user.name }}" ng-src="{{user.profilePic}}" class="md-avatar" />
                                                <p>{{ user.name }}</p>
                                                <!-- <md-svg-icon class="ic_24px" icon="{{person.iconimg}}"></md-svg-icon>-->
                                                <md-icon md-svg-icon="communication:ic_settings" ng-click="ViewController(user)" aria-label="Open Chat" class="md-secondary md-hue-3" ng-class="{'md-primary': user.name}"></md-icon>
                                            </md-list-item>
                                        </md-list>

                                </div>
                            </accordion-group>
                            <accordion-group heading="All Shop Branches">
                                <div>

                                    <md-list>
                                        <md-list-item ng-repeat="branch in branchList" ng-click="ViewController(branch)">
                                            <img alt="{{ branch.shop.name }}" ng-src="{{branch.shop.iconImage}}" class="md-avatar" />
                                            <p>{{ branch.shop.name }}</p>
                                            <!-- <md-svg-icon class="ic_24px" icon="{{person.iconimg}}"></md-svg-icon>-->
                                            <md-icon md-svg-icon="communication:ic_settings" ng-click="ViewController(branch)" aria-label="Open Chat" class="md-secondary md-hue-3" ng-class="{'md-primary': branch.shop.name}"></md-icon>
                                        </md-list-item>
                                    </md-list>

                                </div>
                            </accordion-group>

                        </accordion>
                    </div>

                    <div class="raw">
                        <div class="col-md-8">
                            <div class="md-actions" layout="row">
                                <div ng-if="addNew">
                                    <md-button  class="md-raised md-primary" ng-disabled="itemForm.$invalid || btnPressed" ng-click="answer(1)" md-autofocus>
                                        Save
                                    </md-button>
                                    <span flex></span>
                                </div>
                                <div ng-if="!addNew">
                                    <md-button class="md-raised md-primary" ng-disabled="itemForm.$invalid || btnPressed" ng-click="answer(2)" md-autofocus>
                                        Update
                                    </md-button>
                                    <span flex></span>
                                    <md-button class="md-raised md-warn" ng-disabled="btnPressed" ng-click="answer(0)" >
                                        Remove
                                    </md-button>
                                </div>

                                <md-button ng-click="close('2')" style="margin-right:20px;" >
                                    Close
                                </md-button>
                            </div>
                        </div>
                    </div>

                </div>
            </div>


        </form>
    </md-content>
</md-tab>
</md-tabs>
</md-content>
</div>

